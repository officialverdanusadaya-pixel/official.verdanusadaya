<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Produk - Verda Nusadaya</title>
    <meta
      name="description"
      content="Lihat produk agroindustri berkualitas tinggi dari Verda Nusadaya: kopi, karet, kelapa sawit, dan lainnya. Download katalog produk lengkap."
    />
    <meta
      name="keywords"
      content="produk verda nusadaya, kopi, karet, kelapa sawit, agroindustri, katalog produk"
    />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://officialverdanusadaya-pixel.github.io/official.verdanusadaya/products.html"
    />
    <meta property="og:title" content="Produk - Verda Nusadaya" />
    <meta
      property="og:description"
      content="Lihat produk agroindustri berkualitas tinggi dari Verda Nusadaya."
    />
    <meta property="og:image" content="./img/favicon-32x32.png" />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta
      property="twitter:url"
      content="https://officialverdanusadaya-pixel.github.io/official.verdanusadaya/products.html"
    />
    <meta property="twitter:title" content="Produk - Verda Nusadaya" />
    <meta
      property="twitter:description"
      content="Lihat produk agroindustri berkualitas tinggi dari Verda Nusadaya."
    />
    <meta property="twitter:image" content="./img/favicon-32x32.png" />

    <!-- Additional SEO Meta Tags -->
    <meta name="robots" content="index, follow" />
    <meta name="googlebot" content="index, follow" />
    <meta name="language" content="Indonesian" />
    <meta name="revisit-after" content="7 days" />
    <link
      rel="canonical"
      href="https://officialverdanusadaya-pixel.github.io/official.verdanusadaya/products.html"
    />

    <!-- Favicon -->
    <link rel="icon" href="./img/favicon-32x32.png" />
    <link rel="apple-touch-icon" href="./img/favicon-32x32.png" />

    <!-- Premium Fonts -->
    <link
      href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Montserrat:wght@300;400;500;600;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap"
      rel="stylesheet"
    />

    <!-- Font Awesome Icons -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- AOS Animation -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet" />

    <!-- CSS -->
    <link rel="stylesheet" href="./css/style.css" />

    <!-- Structured Data for Products Page -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "CollectionPage",
        "name": "Produk - Verda Nusadaya",
        "description": "Katalog lengkap produk agroindustri berkualitas tinggi dari PT. Verda Nusadaya",
        "url": "https://officialverdanusadaya-pixel.github.io/official.verdanusadaya/products.html",
        "mainEntity": {
          "@type": "ItemList",
          "itemListElement": [
            {
              "@type": "Product",
              "name": "Premium Arabica Coffee",
              "category": "Kopi",
              "offers": {
                "@type": "Offer",
                "price": "150000",
                "priceCurrency": "IDR",
                "availability": "https://schema.org/InStock"
              }
            },
            {
              "@type": "Product",
              "name": "SIR-20 Standard Rubber",
              "category": "Karet",
              "offers": {
                "@type": "Offer",
                "price": "25000",
                "priceCurrency": "IDR",
                "availability": "https://schema.org/InStock"
              }
            },
            {
              "@type": "Product",
              "name": "Crude Palm Oil",
              "category": "Kelapa Sawit",
              "offers": {
                "@type": "Offer",
                "price": "12000",
                "priceCurrency": "IDR",
                "availability": "https://schema.org/InStock"
              }
            }
          ]
        }
      }
    </script>

    <!-- Custom Premium Styles -->
    <style>
      /* Premium Typography */
      h1,
      h2,
      h3,
      h4,
      h5,
      h6 {
        font-family: "Playfair Display", serif;
        font-weight: 700;
      }

      body {
        font-family: "Montserrat", sans-serif;
      }

      .hero-title {
        font-family: "Playfair Display", serif;
        font-weight: 900;
        font-size: 3.5rem;
        line-height: 1.1;
      }

      .section-subtitle {
        font-family: "Crimson Text", serif;
        font-style: italic;
        font-size: 1.2rem;
      }

      /* Premium Hero Section */
      .products-hero {
        background: linear-gradient(
            135deg,
            rgba(44, 95, 45, 0.9),
            rgba(0, 0, 0, 0.8)
          ),
          url("https://picsum.photos/seed/agro-products-hero/1920/800.jpg");
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        padding: 120px 0 80px;
        position: relative;
        overflow: hidden;
      }

      .products-hero::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: url("https://picsum.photos/seed/agro-pattern/1920/800.jpg");
        background-size: cover;
        opacity: 0.1;
        z-index: 0;
      }

      .products-hero .container {
        position: relative;
        z-index: 1;
      }

      /* Premium Filter Section */
      .filter-section {
        background: white;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        padding: 2rem;
        margin-bottom: 2rem;
        position: relative;
        overflow: hidden;
      }

      .filter-section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 5px;
        background: linear-gradient(
          90deg,
          var(--primary-color),
          var(--accent-color)
        );
      }

      .search-container {
        position: relative;
      }

      .search-icon {
        position: absolute;
        left: 15px;
        top: 50%;
        transform: translateY(-50%);
        color: var(--text-gray);
        z-index: 1;
      }

      .search-input {
        padding-left: 45px;
        border-radius: 50px;
        border: 2px solid #e5e7eb;
        transition: all 0.3s ease;
      }

      .search-input:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(44, 95, 45, 0.1);
      }

      .filter-select {
        border-radius: 10px;
        border: 2px solid #e5e7eb;
        transition: all 0.3s ease;
      }

      .filter-select:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 0 3px rgba(44, 95, 45, 0.1);
      }

      /* Premium Product Cards */
      .product-card {
        background: white;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        position: relative;
      }

      .product-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 5px;
        background: linear-gradient(
          90deg,
          var(--primary-color),
          var(--accent-color)
        );
      }

      .product-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
      }

      .product-image {
        position: relative;
        height: 220px;
        overflow: hidden;
      }

      .product-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.5s ease;
      }

      .product-card:hover .product-image img {
        transform: scale(1.1);
      }

      .product-badge {
        position: absolute;
        top: 15px;
        right: 15px;
        background: var(--accent-color);
        color: var(--dark-color);
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 600;
        z-index: 1;
      }

      .product-content {
        padding: 1.5rem;
      }

      .product-title {
        font-size: 1.2rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
        color: var(--primary-color);
      }

      .product-category {
        color: var(--text-gray);
        font-size: 0.9rem;
        margin-bottom: 0.5rem;
      }

      .product-price {
        font-size: 1.2rem;
        font-weight: 700;
        color: var(--secondary-color);
        margin-bottom: 1rem;
      }

      .product-rating {
        display: flex;
        align-items: center;
        margin-bottom: 1rem;
      }

      .rating-stars {
        color: var(--gold);
        margin-right: 0.5rem;
      }

      .rating-value {
        color: var(--text-gray);
        font-size: 0.9rem;
      }

      .product-actions {
        display: flex;
        gap: 0.5rem;
      }

      .product-btn {
        flex: 1;
        padding: 0.5rem;
        border-radius: 8px;
        font-size: 0.9rem;
        font-weight: 500;
        text-align: center;
        transition: all 0.3s ease;
      }

      .product-btn-primary {
        background: var(--primary-color);
        color: white;
      }

      .product-btn-primary:hover {
        background: var(--secondary-color);
      }

      .product-btn-outline {
        background: transparent;
        color: var(--primary-color);
        border: 1px solid var(--primary-color);
      }

      .product-btn-outline:hover {
        background: var(--primary-color);
        color: white;
      }

      /* Premium Category Cards */
      .category-card {
        background: white;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        cursor: pointer;
        position: relative;
      }

      .category-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 5px;
        background: linear-gradient(
          90deg,
          var(--primary-color),
          var(--accent-color)
        );
      }

      .category-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
      }

      .category-icon {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        background: linear-gradient(
          135deg,
          var(--secondary-color),
          var(--primary-color)
        );
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 1.5rem;
        color: white;
        font-size: 2rem;
      }

      /* Premium List View */
      .product-list-view .product-card {
        display: flex;
        align-items: center;
        padding: 1.5rem;
      }

      .product-list-view .product-image {
        width: 200px;
        height: 150px;
        flex-shrink: 0;
        margin-right: 1.5rem;
      }

      .product-list-view .product-content {
        flex: 1;
        padding: 0;
      }

      /* Loading State */
      .skeleton {
        background: linear-gradient(
          90deg,
          #f0f0f0 25%,
          #e0e0e0 50%,
          #f0f0f0 75%
        );
        background-size: 200% 100%;
        animation: loading 1.5s infinite;
      }

      @keyframes loading {
        0% {
          background-position: 200% 0;
        }
        100% {
          background-position: -200% 0;
        }
      }

      /* Responsive Adjustments */
      @media (max-width: 768px) {
        .product-list-view .product-card {
          flex-direction: column;
        }

        .product-list-view .product-image {
          width: 100%;
          height: 200px;
          margin-right: 0;
          margin-bottom: 1rem;
        }
      }
    </style>
  </head>
  <body class="min-h-screen bg-white">
    <!-- Premium Loading Screen -->
    <div class="loader" id="loader">
      <div class="leaf-loader"></div>
    </div>

    <!-- Navigation -->
    <nav class="nav" id="navbar">
      <div class="nav-container">
        <a href="index.html" class="nav-logo">
          <img src="img/favicon-32x32.png" alt="Verda Nusadaya" />
          <span>Verda Nusadaya</span>
        </a>

        <div class="nav-menu">
          <a href="index.html">Beranda</a>
          <a href="about.html">Tentang Kami</a>
          <a href="products.html" class="active">Produk</a>
          <a href="contact.html">Kontak</a>
        </div>

        <div class="nav-contact">
          <div class="nav-contact-info">
            <i class="fas fa-phone"></i>
            <span>+62 812-3456-7890</span>
          </div>
          <a href="contact.html" class="btn btn-primary">Hubungi Kami</a>
        </div>

        <button class="nav-mobile-btn" onclick="toggleMobileMenu()">
          <i class="fas fa-bars"></i>
        </button>
      </div>
    </nav>

    <!-- Mobile Menu -->
    <div id="mobileMenu" class="mobile-menu">
      <div class="mobile-menu-header">
        <div class="nav-logo">
          <img src="img/favicon-32x32.png" alt="Verda Nusadaya" />
          <span>Verda Nusadaya</span>
        </div>
        <button class="mobile-menu-close" onclick="toggleMobileMenu()">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="mobile-menu-content">
        <ul class="mobile-menu-links">
          <li><a href="index.html" onclick="toggleMobileMenu()">Beranda</a></li>
          <li>
            <a href="about.html" onclick="toggleMobileMenu()">Tentang Kami</a>
          </li>
          <li>
            <a href="products.html" onclick="toggleMobileMenu()" class="active"
              >Produk</a
            >
          </li>
          <li>
            <a href="contact.html" onclick="toggleMobileMenu()">Kontak</a>
          </li>
        </ul>
        <div class="mobile-menu-contact">
          <div class="mobile-menu-contact-item">
            <i class="fas fa-phone"></i>
            <span>+62 812-3456-7890</span>
          </div>
          <div class="mobile-menu-contact-item">
            <i class="fas fa-envelope"></i>
            <span>info@verdanusadaya.com</span>
          </div>
          <a href="contact.html" class="btn btn-primary w-full">Hubungi Kami</a>
        </div>
      </div>
    </div>
    <div id="overlay" class="overlay" onclick="toggleMobileMenu()"></div>

    <!-- Premium Hero Section -->
    <section class="products-hero">
      <div class="container text-center text-white">
        <h1 class="hero-title" data-aos="fade-up">Katalog Produk</h1>
        <p
          class="section-subtitle max-w-3xl mx-auto mt-4"
          data-aos="fade-up"
          data-aos-delay="200"
        >
          Pilihan produk agroindustri berkualitas tinggi untuk mendukung
          kesuksesan bisnis Anda.
        </p>
      </div>
    </section>

    <!-- Enhanced Filter Section -->
    <section class="section">
      <div class="container">
        <div class="filter-section" data-aos="fade-up">
          <div
            class="flex flex-col lg:flex-row gap-4 items-center justify-between"
          >
            <div class="flex flex-col sm:flex-row gap-4 flex-1">
              <div class="search-container flex-1 max-w-md">
                <i class="fas fa-search search-icon"></i>
                <input
                  type="text"
                  placeholder="Cari produk..."
                  class="search-input w-full"
                  id="searchInput"
                  autocomplete="off"
                />
              </div>
              <select
                class="filter-select form-select w-full sm:w-48"
                id="categoryFilter"
              >
                <option value="all">Semua Kategori</option>
                <option value="kopi">Kopi</option>
                <option value="karet">Karet</option>
                <option value="kelapa-sawit">Kelapa Sawit</option>
              </select>
              <select
                class="filter-select form-select w-full sm:w-48"
                id="sortBy"
              >
                <option value="featured">Unggulan</option>
                <option value="name">Nama (A-Z)</option>
                <option value="price-low">Harga (Rendah ke Tinggi)</option>
                <option value="price-high">Harga (Tinggi ke Rendah)</option>
                <option value="rating">Rating Tertinggi</option>
              </select>
            </div>
            <div class="flex gap-2">
              <button class="btn btn-outline btn-sm" onclick="resetFilters()">
                Reset
              </button>
              <button
                class="btn btn-primary btn-sm"
                onclick="downloadCatalog()"
              >
                <i class="fas fa-download mr-2"></i>
                Download Katalog
              </button>
            </div>
          </div>
          <div class="mt-4 flex items-center justify-between">
            <p class="text-sm text-gray-600">
              Menampilkan
              <span id="productCount" class="font-semibold text-green-600"
                >0</span
              >
              produk
            </p>
            <div class="flex gap-2">
              <button
                class="text-sm text-gray-500 hover:text-gray-700"
                onclick="toggleView('grid')"
                id="gridViewBtn"
              >
                <i class="fas fa-th"></i>
              </button>
              <button
                class="text-sm text-gray-500 hover:text-gray-700"
                onclick="toggleView('list')"
                id="listViewBtn"
              >
                <i class="fas fa-list"></i>
              </button>
            </div>
          </div>
        </div>

        <!-- Products Grid -->
        <div
          id="productsContainer"
          class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mt-8"
        >
          <!-- Products will be loaded by JavaScript -->
        </div>

        <!-- No Results Message -->
        <div id="noResults" class="hidden text-center py-12">
          <div class="mb-4">
            <i class="fas fa-search text-6xl text-gray-300"></i>
          </div>
          <h3 class="text-xl font-semibold text-gray-700 mb-2">
            Produk tidak ditemukan
          </h3>
          <p class="text-gray-500 mb-4">
            Coba ubah filter atau kata kunci pencarian Anda
          </p>
          <button class="btn btn-primary" onclick="resetFilters()">
            Reset Filter
          </button>
        </div>

        <!-- Loading State -->
        <div id="loadingState" class="hidden text-center py-12">
          <div class="loading-spinner mx-auto mb-4"></div>
          <p class="text-gray-500">Memuat produk...</p>
        </div>
      </div>
    </section>

    <!-- Product Categories Section -->
    <section class="section section-gray">
      <div class="container">
        <div class="section-title" data-aos="fade-up">
          <h2>Kategori <span class="text-green-600">Produk</span></h2>
          <p class="max-w-2xl mx-auto">
            Jelajahi berbagai kategori produk agroindustri berkualitas tinggi
            yang kami tawarkan.
          </p>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div
            class="category-card text-center p-6"
            data-aos="fade-up"
            data-aos-delay="100"
            onclick="filterByCategory('kopi')"
          >
            <div class="category-icon">
              <i class="fas fa-coffee"></i>
            </div>
            <h3 class="text-xl font-semibold text-gray-800 mb-2">
              Premium Coffee
            </h3>
            <p class="text-gray-600">
              Kopi Arabica dan Robusta kelas premium bersumber dari perkebunan
              terbaik Indonesia.
            </p>
          </div>

          <div
            class="category-card text-center p-6"
            data-aos="fade-up"
            data-aos-delay="200"
            onclick="filterByCategory('karet')"
          >
            <div class="category-icon">
              <i class="fas fa-circle-notch"></i>
            </div>
            <h3 class="text-xl font-semibold text-gray-800 mb-2">
              Cengkeh Crush
            </h3>
            <p class="text-gray-600">
              Cengkeh berkualitas tinggi standar internasional untuk kebutuhan
              industri.
            </p>
          </div>

          <div
            class="category-card text-center p-6"
            data-aos="fade-up"
            data-aos-delay="300"
            onclick="filterByCategory('kelapa-sawit')"
          >
            <div class="category-icon">
              <i class="fas fa-seedling"></i>
            </div>
            <h3 class="text-xl font-semibold text-gray-800 mb-2">
              Golden Coconut
            </h3>
            <p class="text-gray-600">
              Produk berbasis kelapa berkualitas premium dan produk turunannya.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="cta-section">
      <div class="container">
        <h2 data-aos="fade-up">Butuh Bantuan Memilih Produk yang Tepat?</h2>
        <p class="max-w-2xl mx-auto" data-aos="fade-up" data-aos-delay="100">
          Tim ahli kami siap membantu Anda menemukan produk yang sempurna untuk
          kebutuhan bisnis Anda.
        </p>

        <div class="cta-buttons" data-aos="fade-up" data-aos-delay="200">
          <a
            href="contact.html"
            class="btn bg-white text-green-600 hover:bg-gray-100 px-8"
          >
            <i class="fas fa-phone mr-2"></i>
            Konsultasi Gratis
          </a>
          <a
            href="#"
            class="btn btn-outline border-white text-white hover:bg-white hover:text-green-600 px-8"
            onclick="downloadCatalog()"
          >
            <i class="fas fa-download mr-2"></i>
            Download Katalog Lengkap
          </a>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div class="footer-content">
          <div class="footer-section">
            <div class="footer-logo">
              <img
                src="img/favicon-32x32.png"
                alt="Verda Nusadaya Logo"
                class="footer-logo-icon"
              />
              <span>Verda Nusadaya</span>
            </div>
            <p class="text-gray-300 mb-4 max-w-md">
              PT. Verda Nusadaya adalah perusahaan agroindustri terpercaya yang
              menyediakan produk berkualitas tinggi dari hasil pertanian
              Indonesia.
            </p>

            <div class="footer-social">
              <a
                href="https://www.facebook.com/verdanusadaya"
                class="footer-social"
                target="_blank"
              >
                <i class="fab fa-facebook-f"></i>
              </a>
              <a
                href="https://www.instagram.com/verdanusadaya"
                class="footer-social"
                target="_blank"
              >
                <i class="fab fa-instagram"></i>
              </a>
              <a
                href="https://www.twitter.com/verdanusadaya"
                class="footer-social"
                target="_blank"
              >
                <i class="fab fa-twitter"></i>
              </a>
            </div>
          </div>

          <div class="footer-section">
            <h3>Link Cepat</h3>
            <ul class="footer-links">
              <li><a href="index.html">Beranda</a></li>
              <li><a href="about.html">Tentang Kami</a></li>
              <li><a href="products.html">Produk</a></li>
              <li><a href="contact.html">Kontak</a></li>
            </ul>
          </div>

          <div class="footer-section">
            <h3>Kontak</h3>
            <div class="space-y-3">
              <div class="flex items-center space-x-2">
                <i class="fas fa-phone text-green-400"></i>
                <span class="text-gray-300">+62 812-3456-7890</span>
              </div>
              <div class="flex items-center space-x-2">
                <i class="fas fa-envelope text-green-400"></i>
                <span class="text-gray-300">info@verdanusadaya.com</span>
              </div>
              <div class="flex items-start space-x-2">
                <i class="fas fa-map-marker-alt text-green-400 mt-1"></i>
                <span class="text-gray-300">
                  Jl. Raya Gondang No.16, Gondang Village<br />
                  Gangga Subdistrict, North Lombok Regency<br />
                  West Nusa Tenggara 83353
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="footer-bottom">
        <p>&copy; 2024 PT. Verda Nusadaya. All rights reserved.</p>
      </div>
    </footer>

    <!-- JavaScript -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script src="./js/main.js"></script>

    <!-- Additional JavaScript for Enhanced Product Filtering -->
    <script>
      // Initialize AOS
      AOS.init({
        duration: 1000,
        once: true,
      });

      // Hide loader when page is fully loaded
      window.addEventListener("load", function () {
        setTimeout(function () {
          document.getElementById("loader").classList.add("hidden");
        }, 1000);
      });

      // Navbar scroll effect
      window.addEventListener("scroll", function () {
        const navbar = document.getElementById("navbar");
        if (window.scrollY > 100) {
          navbar.classList.add("scrolled");
        } else {
          navbar.classList.remove("scrolled");
        }
      });

      // Enhanced filtering and sorting functions
      function filterByCategory(category) {
        const categoryFilter = document.getElementById("categoryFilter");
        if (categoryFilter) {
          categoryFilter.value = category;
          filterProducts();
        }
      }

      function toggleView(viewType) {
        const container = document.getElementById("productsContainer");
        const gridBtn = document.getElementById("gridViewBtn");
        const listBtn = document.getElementById("listViewBtn");

        if (viewType === "list") {
          container.classList.add("product-list-view");
          listBtn.classList.add("text-green-600");
          gridBtn.classList.remove("text-green-600");
        } else {
          container.classList.remove("product-list-view");
          gridBtn.classList.add("text-green-600");
          listBtn.classList.remove("text-green-600");
        }
      }

      // Enhanced filter function with sorting
      function filterProducts() {
        const searchInput = document.getElementById("searchInput");
        const categoryFilter = document.getElementById("categoryFilter");
        const sortBy = document.getElementById("sortBy");
        const loadingState = document.getElementById("loadingState");
        const container = document.getElementById("productsContainer");

        // Show loading state
        if (loadingState) loadingState.classList.remove("hidden");
        if (container) container.style.display = "none";

        const searchTerm = searchInput ? searchInput.value.toLowerCase() : "";
        const selectedCategory = categoryFilter ? categoryFilter.value : "all";
        const selectedSort = sortBy ? sortBy.value : "featured";

        // Simulate loading delay for better UX
        setTimeout(() => {
          let filteredProducts = products.filter((product) => {
            const matchesCategory =
              selectedCategory === "all" ||
              product.category === selectedCategory;
            const matchesSearch =
              product.name.toLowerCase().includes(searchTerm) ||
              product.description.toLowerCase().includes(searchTerm) ||
              product.categoryLabel.toLowerCase().includes(searchTerm);
            return matchesCategory && matchesSearch && product.inStock;
          });

          // Sort products
          switch (selectedSort) {
            case "name":
              filteredProducts.sort((a, b) => a.name.localeCompare(b.name));
              break;
            case "price-low":
              filteredProducts.sort((a, b) => {
                const priceA = parseInt(a.price.replace(/[^\d]/g, ""));
                const priceB = parseInt(b.price.replace(/[^\d]/g, ""));
                return priceA - priceB;
              });
              break;
            case "price-high":
              filteredProducts.sort((a, b) => {
                const priceA = parseInt(a.price.replace(/[^\d]/g, ""));
                const priceB = parseInt(b.price.replace(/[^\d]/g, ""));
                return priceB - priceA;
              });
              break;
            case "rating":
              filteredProducts.sort((a, b) => b.rating - a.rating);
              break;
            case "featured":
            default:
              // Featured products first, then by rating
              filteredProducts.sort((a, b) => {
                if (a.isFeatured && !b.isFeatured) return -1;
                if (!a.isFeatured && b.isFeatured) return 1;
                return b.rating - a.rating;
              });
              break;
          }

          // Hide loading state
          if (loadingState) loadingState.classList.add("hidden");
          if (container) container.style.display = "";

          // Render products
          renderProducts(filteredProducts);
        }, 300);
      }

      // Enhanced event listeners
      document.addEventListener("DOMContentLoaded", function () {
        // Setup event listeners
        setupEventListeners();

        // Add sort change listener
        const sortBy = document.getElementById("sortBy");
        if (sortBy) {
          sortBy.addEventListener("change", filterProducts);
        }

        // Add search debouncing
        let searchTimeout;
        const searchInput = document.getElementById("searchInput");
        if (searchInput) {
          searchInput.addEventListener("input", function () {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(filterProducts, 300);
          });
        }

        // Initial render
        filterProducts();
      });

      // Make functions globally available
      window.filterByCategory = filterByCategory;
      window.toggleView = toggleView;
    </script>
  </body>
</html>
