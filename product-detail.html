<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Detail Produk - Verda Nusadaya</title>
    <meta
      name="description"
      content="Detail produk agroindustri berkualitas tinggi dari Verda Nusadaya"
    />
    <meta
      name="keywords"
      content="detail produk, verda nusadaya, agroindustri, kopi, karet, kelapa sawit"
    />

    <!-- Open Graph -->
    <meta property="og:title" content="Detail Produk - Verda Nusadaya" />
    <meta
      property="og:description"
      content="Detail produk agroindustri berkualitas tinggi dari Verda Nusadaya"
    />
    <meta
      property="og:url"
      content="https://officialverdanusadaya-pixel.github.io/official.verdanusadaya/product-detail.html"
    />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="./img/favicon-32x32.png" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Detail Produk - Verda Nusadaya" />
    <meta
      name="twitter:description"
      content="Detail produk agroindustri berkualitas tinggi dari Verda Nusadaya"
    />
    <meta name="twitter:image" content="./img/favicon-32x32.png" />

    <!-- Additional SEO Meta Tags -->
    <meta name="robots" content="index, follow" />
    <meta name="googlebot" content="index, follow" />
    <meta name="language" content="Indonesian" />
    <meta name="revisit-after" content="7 days" />

    <!-- Favicon -->
    <link rel="icon" href="./img/favicon-32x32.png" />
    <link rel="apple-touch-icon" href="./img/favicon-32x32.png" />

    <!-- CSS -->
    <link rel="stylesheet" href="./css/style.css" />

    <!-- Structured Data for Product Detail -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Product",
        "name": "Premium Agro Products",
        "description": "High-quality agro-industry products from PT. Verda Nusadaya",
        "brand": {
          "@type": "Brand",
          "name": "PT. Verda Nusadaya"
        },
        "manufacturer": {
          "@type": "Organization",
          "name": "PT. Verda Nusadaya",
          "address": {
            "@type": "PostalAddress",
            "streetAddress": "Jl. Raya Gondang No.16, Gondang Village",
            "addressLocality": "Gangga Subdistrict",
            "addressRegion": "North Lombok Regency",
            "postalCode": "83353",
            "addressCountry": "ID"
          }
        },
        "offers": {
          "@type": "Offer",
          "availability": "https://schema.org/InStock",
          "priceCurrency": "IDR",
          "seller": {
            "@type": "Organization",
            "name": "PT. Verda Nusadaya"
          }
        }
      }
    </script>
  </head>
  <body class="min-h-screen bg-white">
    <!-- Navigation -->
    <nav class="nav">
      <div class="nav-container">
        <a href="index.html" class="nav-logo flex items-center space-x-2">
          <img
            src="img/favicon-32x32.png"
            alt="Verda Nusadaya"
            class="h-10 w-10"
          />
          <span class="font-semibold text-lg">Verda Nusadaya</span>
        </a>

        <div class="nav-menu">
          <a href="index.html">Beranda</a>
          <a href="about.html">Tentang Kami</a>
          <a href="products.html">Produk</a>
          <a href="contact.html">Kontak</a>
        </div>

        <div class="nav-contact">
          <div class="nav-contact-info">
            <svg
              class="w-4 h-4"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
              ></path>
            </svg>
            <span>+62 812-3456-7890</span>
          </div>
          <a href="contact.html" class="btn btn-primary">Hubungi Kami</a>
        </div>

        <button class="nav-mobile-btn" onclick="toggleMobileMenu()">
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16"
            ></path>
          </svg>
        </button>
      </div>
    </nav>

    <!-- Mobile Menu -->
    <div id="mobileMenu" class="mobile-menu">
      <div class="mobile-menu-header">
        <div class="nav-logo flex items-center space-x-2">
          <img
            src="img/favicon-32x32.png"
            alt="Verda Nusadaya"
            class="h-10 w-10"
          />
          <span class="font-semibold text-lg">Verda Nusadaya</span>
        </div>

        <button class="mobile-menu-close" onclick="toggleMobileMenu()">
          ×
        </button>
      </div>
      <div class="mobile-menu-content">
        <ul class="mobile-menu-links">
          <li><a href="index.html" onclick="toggleMobileMenu()">Beranda</a></li>
          <li>
            <a href="about.html" onclick="toggleMobileMenu()">Tentang Kami</a>
          </li>
          <li>
            <a href="products.html" onclick="toggleMobileMenu()">Produk</a>
          </li>
          <li>
            <a href="contact.html" onclick="toggleMobileMenu()">Kontak</a>
          </li>
        </ul>
        <div class="mobile-menu-contact">
          <div class="mobile-menu-contact-item">
            <svg
              class="w-4 h-4"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
              ></path>
            </svg>
            <span>+62 812-3456-7890</span>
          </div>
          <div class="mobile-menu-contact-item">
            <svg
              class="w-4 h-4"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
              ></path>
            </svg>
            <span>info@verdanusadaya.com</span>
          </div>
          <a href="contact.html" class="btn btn-primary w-full">Hubungi Kami</a>
        </div>
      </div>
    </div>

    <div id="overlay" class="overlay" onclick="toggleMobileMenu()"></div>

    <!-- Main Content -->
    <main class="product-detail-container">
      <div class="container">
        <!-- Breadcrumb Navigation -->
        <ul class="breadcrumb">
          <li><a href="index.html">Beranda</a></li>
          <li><a href="products.html">Produk</a></li>
          <li id="productName">Memuat...</li>
        </ul>

        <!-- Loading State -->
        <div id="loadingState" class="loading-spinner">
          <div class="loading-spinner"></div>
        </div>

        <!-- Error State -->
        <div id="errorState" class="error-message hidden">
          <p>
            Produk tidak ditemukan. Silakan kembali ke
            <a href="products.html">halaman produk</a>.
          </p>
        </div>

        <!-- Product Detail Content -->
        <div id="productContent" class="hidden">
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12">
            <!-- Product Image -->
            <div class="product-image-container">
              <img
                id="productImage"
                src=""
                alt=""
                class="product-image"
                loading="lazy"
              />
              <span id="productBadge" class="product-badge hidden"></span>
            </div>

            <!-- Product Information -->
            <div>
              <h1 id="productTitle" class="text-3xl font-bold mb-4"></h1>

              <div class="rating-container">
                <div class="rating-stars" id="productRating"></div>
                <span class="rating-value" id="productRatingValue"></span>
              </div>

              <div class="product-specs" id="productSpecs"></div>

              <p id="productDescription" class="text-gray-600 mb-6"></p>

              <div class="product-actions">
                <a href="contact.html" class="btn btn-primary">
                  <svg
                    class="w-5 h-5 mr-2"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
                    ></path>
                  </svg>
                  Hubungi Kami
                </a>
                <a href="products.html" class="btn btn-outline">
                  <svg
                    class="w-5 h-5 mr-2"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M10 19l-7-7m0 0l7-7m-7 7h18"
                    ></path>
                  </svg>
                  Kembali ke Produk
                </a>
              </div>
            </div>
          </div>

          <!-- Product Tabs -->
          <div class="product-tabs">
            <div class="tab-buttons">
              <button
                class="tab-button active"
                onclick="showTab('description')"
              >
                Deskripsi
              </button>
              <button class="tab-button" onclick="showTab('specifications')">
                Spesifikasi
              </button>
              <button class="tab-button" onclick="showTab('ordering')">
                Cara Pemesanan
              </button>
            </div>
          </div>

          <!-- Tab Content -->
          <div class="tab-content active" id="descriptionTab">
            <p id="fullDescription" class="text-gray-600 mb-6"></p>
          </div>

          <div class="tab-content" id="specificationsTab">
            <ul class="spec-list" id="specList"></ul>
          </div>

          <div class="tab-content" id="orderingTab">
            <div class="bg-gray-50 p-6 rounded-lg">
              <h3 class="text-xl font-semibold mb-4">Cara Pemesanan</h3>
              <div class="space-y-4">
                <div class="flex items-start space-x-3">
                  <div
                    class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0"
                  >
                    <span class="text-green-600 font-semibold">1</span>
                  </div>
                  <div>
                    <h4 class="font-semibold">Hubungi Sales</h4>
                    <p class="text-gray-600">
                      Konsultasikan kebutuhan Anda dengan tim sales kami
                    </p>
                  </div>
                </div>
                <div class="flex items-start space-x-3">
                  <div
                    class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0"
                  >
                    <span class="text-green-600 font-semibold">2</span>
                  </div>
                  <div>
                    <h4 class="font-semibold">Request Quote</h4>
                    <p class="text-gray-600">
                      Dapatkan penawaran harga khusus untuk volume besar
                    </p>
                  </div>
                </div>
                <div class="flex items-start space-x-3">
                  <div
                    class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0"
                  >
                    <span class="text-green-600 font-semibold">3</span>
                  </div>
                  <div>
                    <h4 class="font-semibold">Konfirmasi Order</h4>
                    <p class="text-gray-600">
                      Konfirmasi ketersediaan stok dan jadwal pengiriman
                    </p>
                  </div>
                </div>
              </div>
              <div
                class="mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg"
              >
                <p class="text-sm text-yellow-800">
                  <strong>Informasi Penting:</strong> Harga dan ketersediaan
                  stok dapat berubah sewaktu-waktu. Harap konfirmasi dengan tim
                  sales kami untuk informasi terkini.
                </p>
              </div>
            </div>
          </div>

          <!-- Related Products -->
          <div class="mt-16">
            <h2 class="text-2xl font-bold mb-8">Produk Terkait</h2>
            <div
              id="relatedProducts"
              class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"
            >
              <!-- Related products will be loaded here -->
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <div class="footer-content">
          <div class="footer-section">
            <div class="footer-logo">
              <img
                src="img/favicon-32x32.png"
                alt="Verda Nusadaya Logo"
                class="footer-logo-icon"
              />
              <span>Verda Nusadaya</span>
            </div>
            <p class="text-gray-300 mb-4 max-w-md">
              PT. Verda Nusadaya adalah perusahaan agroindustri terpercaya yang
              menyediakan produk berkualitas tinggi dari hasil pertanian
              Indonesia.
            </p>
            <div class="footer-social">
              <a
                href="https://www.facebook.com/verdanusadaya"
                class="footer-social"
                target="_blank"
              >
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                  <path
                    d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"
                  />
                </svg>
              </a>
              <a
                href="https://www.instagram.com/verdanusadaya"
                class="footer-social"
                target="_blank"
              >
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                  <path
                    d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zM5.838 12a6.162 6.162 0 1112.324 0 6.162 6.162 0 01-12.324 0zM12 16a4 4 0 110-8 4 4 0 010 8zm4.965-10.405a1.44 1.44 0 112.881.001 1.44 1.44 0 01-2.881-.001z"
                  />
                </svg>
              </a>
              <a
                href="https://www.twitter.com/verdanusadaya"
                class="footer-social"
                target="_blank"
              >
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                  <path
                    d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"
                  />
                </svg>
              </a>
            </div>
          </div>

          <div class="footer-section">
            <h3>Link Cepat</h3>
            <ul class="footer-links">
              <li><a href="index.html">Beranda</a></li>
              <li><a href="about.html">Tentang Kami</a></li>
              <li><a href="products.html">Produk</a></li>
              <li><a href="contact.html">Kontak</a></li>
            </ul>
          </div>

          <div class="footer-section">
            <h3>Kontak</h3>
            <div class="space-y-3">
              <div class="flex items-center space-x-2">
                <svg
                  class="w-4 h-4 text-green-400"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
                  ></path>
                </svg>
                <span class="text-gray-300">+62 812-3456-7890</span>
              </div>
              <div class="flex items-center space-x-2">
                <svg
                  class="w-4 h-4 text-green-400"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                  ></path>
                </svg>
                <span class="text-gray-300">info@verdanusadaya.com</span>
              </div>
              <div class="flex items-start space-x-2">
                <svg
                  class="w-4 h-4 text-green-400 mt-1"
                  fill="none"
                  stroke="currentColor"
                  viewBox="0 0 24 24"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"
                  ></path>
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"
                  ></path>
                </svg>
                <span class="text-gray-300">
                  Jl. Raya Gondang No.16, Gondang Village<br />
                  Gangga Subdistrict, North Lombok Regency<br />
                  West Nusa Tenggara 83353
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="footer-bottom">
        <p>&copy; 2024 PT. Verda Nusadaya. All rights reserved.</p>
      </div>
    </footer>

    <!-- JavaScript -->
    <script src="./js/main.js"></script>

    <!-- Product Detail JavaScript -->
    <script>
      // Get product ID from URL parameter
      const urlParams = new URLSearchParams(window.location.search);
      const productId = urlParams.get("id");

      // DOM elements
      const loadingState = document.getElementById("loadingState");
      const errorState = document.getElementById("errorState");
      const productContent = document.getElementById("productContent");

      // Product detail elements
      const productName = document.getElementById("productName");
      const productImage = document.getElementById("productImage");
      const productBadge = document.getElementById("productBadge");
      const productTitle = document.getElementById("productTitle");
      const productRating = document.getElementById("productRating");
      const productRatingValue = document.getElementById("productRatingValue");
      const productSpecs = document.getElementById("productSpecs");
      const productDescription = document.getElementById("productDescription");
      const fullDescription = document.getElementById("fullDescription");
      const specList = document.getElementById("specList");
      const relatedProducts = document.getElementById("relatedProducts");

      // Initialize product detail page
      document.addEventListener("DOMContentLoaded", function () {
        if (productId) {
          loadProductDetail(productId);
        } else {
          showError();
        }
      });

      // Load product detail
      function loadProductDetail(id) {
        // Find product in products array from main.js
        const product = products.find((p) => p.id == id);

        if (product) {
          displayProductDetail(product);
          loadRelatedProducts(product.category, product.id);
          updateCanonicalUrl(product);
        } else {
          showError();
        }
      }

      // Update canonical URL for SEO
      function updateCanonicalUrl(product) {
        const canonicalLink = document.querySelector('link[rel="canonical"]');
        if (canonicalLink) {
          canonicalLink.href = `https://officialverdanusadaya-pixel.github.io/official.verdanusadaya/product-detail.html?id=${product.id}`;
        }
      }

      // Display product detail
      function displayProductDetail(product) {
        // Hide loading state
        loadingState.classList.add("hidden");

        // Update breadcrumb
        productName.textContent = product.name;

        // Update product image with error handling
        productImage.src = product.image;
        productImage.alt = product.name;
        productImage.onerror = function () {
          this.src =
            "https://via.placeholder.com/600x400?text=" +
            encodeURIComponent(product.name);
        };

        // Update product badge if featured
        if (product.isFeatured) {
          productBadge.textContent = "Unggulan";
          productBadge.classList.add("badge-featured");
          productBadge.classList.remove("hidden");
        }

        // Update product title
        productTitle.textContent = product.name;

        // Update rating
        productRating.innerHTML = generateRatingStars(product.rating);
        productRatingValue.textContent = `${product.rating} (${
          Math.floor(Math.random() * 50) + 10
        } ulasan)`;

        // Update product specs
        productSpecs.innerHTML = "";
        product.specs.forEach((spec) => {
          const badge = document.createElement("span");
          badge.className = "spec-badge";
          badge.textContent = spec;
          productSpecs.appendChild(badge);
        });

        // Update description
        productDescription.textContent = product.description;
        fullDescription.textContent = `${product.description} 

Produk ini memiliki kualitas terbaik dan telah melalui proses quality control yang ketat untuk memastikan kepuasan pelanggan. Dengan harga yang kompetitif, produk ini menjadi pilihan utama untuk kebutuhan agroindustri Anda.

Keunggulan Produk:
• Kualitas premium terjamin
• Sertifikasi internasional
• Harga kompetitif
• Pengiriman tepat waktu
• Layanan pelanggan terbaik

Aplikasi Produk:
${product.specs.map((spec) => `• ${spec}`).join("\n")}

Untuk informasi lebih lanjut tentang harga, ketersediaan stok, dan proses pemesanan, silakan hubungi tim sales kami.`;

        // Update specifications
        specList.innerHTML = "";
        const categoryLabel = getCategoryLabel(product.category);

        // Add basic specs
        const basicSpecs = [
          { label: "Kategori", value: categoryLabel },
          { label: "Harga", value: product.price },
          {
            label: "Minimum Order",
            value: `${product.minOrder} ${
              product.category === "kelapa-sawit" &&
              product.name.includes("Liter")
                ? "liter"
                : "kg"
            }`,
          },
          {
            label: "Ketersediaan",
            value: product.inStock ? "Tersedia" : "Stok Habis",
          },
          { label: "Rating", value: `${product.rating}/5.0` },
        ];

        basicSpecs.forEach((spec) => {
          const specItem = document.createElement("li");
          specItem.innerHTML = `
            <span class="spec-label">${spec.label}</span>
            <span class="spec-value">${spec.value}</span>
          `;
          specList.appendChild(specItem);
        });

        // Add all specs from product data
        product.specs.forEach((spec) => {
          const specItem = document.createElement("li");
          specItem.innerHTML = `
            <span class="spec-label">${spec}</span>
            <span class="spec-value">Tersedia</span>
          `;
          specList.appendChild(specItem);
        });

        // Show product content
        productContent.classList.remove("hidden");
      }

      // Load related products
      function loadRelatedProducts(category, currentProductId) {
        // Filter products by category (excluding current product)
        const related = products
          .filter(
            (p) =>
              p.category === category && p.id != currentProductId && p.inStock
          )
          .slice(0, 4);

        // Clear related products container
        relatedProducts.innerHTML = "";

        if (related.length === 0) {
          relatedProducts.innerHTML =
            '<p class="text-gray-500 text-center col-span-full">Tidak ada produk terkait yang tersedia</p>';
          return;
        }

        // Add related products
        related.forEach((product) => {
          const productCard = createRelatedProductCard(product);
          relatedProducts.appendChild(productCard);
        });
      }

      // Create related product card
      function createRelatedProductCard(product) {
        const card = document.createElement("div");
        card.className = "card related-product";

        const categoryLabel = getCategoryLabel(product.category);
        const ratingStars = generateRatingStars(product.rating);

        card.innerHTML = `
          <div class="card-image-container">
            <img src="${product.image}" alt="${
          product.name
        }" class="card-image" loading="lazy" onerror="this.src='https://via.placeholder.com/400x300?text=${encodeURIComponent(
          product.name
        )}'">
            <span class="badge badge-primary absolute top-4 left-4">${categoryLabel}</span>
            ${
              product.isFeatured
                ? `
              <span class="badge badge-yellow absolute top-4 right-4">
                <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                  <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
                </svg>
                Unggulan
              </span>
            `
                : ""
            }
          </div>
          <div class="card-content">
            <h3 class="text-xl font-semibold mb-2">${product.name}</h3>
            <p class="text-gray-600 mb-4 line-clamp-2">${
              product.description
            }</p>
            
            <div class="flex items-center mb-3">
              <div class="flex">
                ${ratingStars}
              </div>
              <span class="ml-2 text-sm text-gray-600">${product.rating}</span>
            </div>

            <div class="flex justify-between items-center">
              <div>
                <span class="text-lg font-bold text-green-600">${
                  product.price
                }</span>
                <span class="text-xs text-gray-500 block">Min. ${
                  product.minOrder
                } ${
          product.category === "kelapa-sawit" && product.name.includes("Liter")
            ? "liter"
            : "kg"
        }</span>
              </div>
              <a href="product-detail.html?id=${
                product.id
              }" class="btn btn-primary btn-sm">Detail</a>
            </div>
          </div>
        `;

        return card;
      }

      // Show error state
      function showError() {
        loadingState.classList.add("hidden");
        errorState.classList.remove("hidden");
      }

      // Enhanced tab switching with smooth transitions
      function showTab(tabName) {
        // Update tab buttons
        const tabButtons = document.querySelectorAll(".tab-button");
        tabButtons.forEach((button) => {
          button.classList.remove("active");
          if (button.textContent.toLowerCase().includes(tabName)) {
            button.classList.add("active");
          }
        });

        // Update tab content with fade effect
        const tabContents = document.querySelectorAll(".tab-content");
        tabContents.forEach((content) => {
          content.style.opacity = "0";
          setTimeout(() => {
            content.classList.remove("active");
          }, 150);
        });

        setTimeout(() => {
          const activeTab = document.getElementById(`${tabName}Tab`);
          if (activeTab) {
            activeTab.style.opacity = "0";
            activeTab.classList.add("active");
            setTimeout(() => {
              activeTab.style.opacity = "1";
            }, 50);
          }
        }, 200);
      }

      // Add to cart functionality (placeholder)
      function addToCart(product) {
        // Placeholder for cart functionality
        alert("Fitur keranjang akan segera tersedia!");
      }

      // Share functionality
      function shareProduct(product) {
        if (navigator.share) {
          navigator.share({
            title: product.name,
            text: product.description,
            url: window.location.href,
          });
        } else {
          // Fallback for browsers that don't support Web Share API
          const dummy = document.createElement("input");
          document.body.appendChild(dummy);
          dummy.value = window.location.href;
          dummy.select();
          document.execCommand("copy");
          document.body.removeChild(dummy);
          alert("Link produk telah disalin!");
        }
      }

      // Make functions globally available
      window.showTab = showTab;
      window.addToCart = addToCart;
      window.shareProduct = shareProduct;
    </script>
  </body>
</html>
